# https://bazel.build/reference/command-line-reference#common_options-flag--downloader_config

# allow list:
allow bcr.bazel.build
allow cache-redirector.jetbrains.com
# e.g. https://cdn.azul.com/zulu/bin/zulu17.50.19-ca-jdk17.0.11-macosx_aarch64.tar.gz
allow cdn.azul.com
# e.g. https://dl.google.com/android/maven2/androidx/collection/collection-jvm/1.5.0/collection-jvm-1.5.0.jar
allow dl.google.com
allow mirror.bazel.build
allow packages.jetbrains.team
# e.g. https://pypi.org/simple/idna/
allow pypi.org
allow go.dev
allow android.googlesource.com

# rewrite list:
rewrite ^files\.pythonhosted\.org/packages/(.*)$ https://cache-redirector.jetbrains.com/files.pythonhosted.org/packages/$1
rewrite ^github\.com/(.*)$ https://cache-redirector.jetbrains.com/github.com/$1
rewrite ^gitlab\.arm\.com/(.*)$ https://cache-redirector.jetbrains.com/gitlab.arm.com/$1
rewrite ^maven\.google\.com/(.*)$ https://cache-redirector.jetbrains.com/maven.google.com/$1
rewrite ^nodejs\.org/(.*)$ https://cache-redirector.jetbrains.com/nodejs.org/$1
rewrite ^registry\.npmjs\.org/(.*)$ https://cache-redirector.jetbrains.com/registry.npmjs.org/$1
rewrite ^repo1\.maven\.org/(.*)$ https://cache-redirector.jetbrains.com/repo1.maven.org/$1
# `ftp.gnu.org` is unreliable, so we mirror `ftpmirror.gnu.org` instead see: https://jetbrains.slack.com/archives/C0XLQPQGP/p1766415915705409?thread_ts=1766141184.355299&cid=C0XLQPQGP
rewrite ^ftp\.gnu\.org/(.*)$ https://cache-redirector.jetbrains.com/ftpmirror.gnu.org/$1

# block by default:
block *
