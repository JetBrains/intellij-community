<idea-plugin>
  <extensionPoints>
    <extensionPoint name="fileBasedIndex" interface="com.intellij.util.indexing.FileBasedIndexExtension" dynamic="true"/>
    <extensionPoint name="dumbServiceInitializationCondition" interface="com.intellij.openapi.project.DumbServiceInitializationCondition" dynamic="true"/>
    <extensionPoint name="fileBasedIndexInfrastructureExtension" interface="com.intellij.util.indexing.FileBasedIndexInfrastructureExtension" dynamic="true"/>
    <extensionPoint name="projectIndexingActivityHistoryListener"
                    interface="com.intellij.util.indexing.diagnostic.ProjectIndexingActivityHistoryListener" dynamic="true"/>
    <extensionPoint name="indexedRootsProvider" interface="com.intellij.util.indexing.IndexableSetContributor" dynamic="true"/>
    <extensionPoint name="indexableFilesContributor" interface="com.intellij.util.indexing.roots.IndexableFilesContributor" dynamic="true"/>
    <extensionPoint name="stubIndex" interface="com.intellij.psi.stubs.StubIndexExtension" dynamic="true"/>
    <extensionPoint name="definitionsSearch" interface="com.intellij.util.QueryExecutor" dynamic="true"/>
    <extensionPoint name="referencesSearch" interface="com.intellij.util.QueryExecutor" dynamic="true"/>

    <extensionPoint name="fileBasedIndexLayout"
                    beanClass="com.intellij.util.indexing.storage.FileBasedIndexLayoutProviderBean"
                    dynamic="true">
      <with attribute="providerClass" implements="com.intellij.util.indexing.storage.FileBasedIndexLayoutProvider"/>
    </extensionPoint>

    <extensionPoint name="indexingFlavor" beanClass="com.intellij.openapi.fileTypes.FileTypeExtensionPoint" dynamic="true">
      <with attribute="implementationClass" implements="com.intellij.util.indexing.flavor.FileIndexingFlavorProvider"/>
    </extensionPoint>
    <extensionPoint name="findModelExtension" interface="com.intellij.find.FindModelExtension" dynamic="true"/>
    <extensionPoint name="codeUsageScopeOptimizer" interface="com.intellij.psi.search.ScopeOptimizer" dynamic="true"/>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <fileBasedIndex implementation="com.intellij.psi.stubs.StubUpdatingIndex"/>

    <fileBasedIndexLayout id="in-memory"
                          presentableNameKey="in.memory.storage.presentable.name"
                          bundleName="messages.LangBundle"
                          providerClass="com.intellij.util.indexing.impl.storage.InMemoryStorageLayoutProvider"
                          version="0"/>

    <requiredForSmartModeStartupActivity implementation="com.intellij.util.indexing.FileBasedIndexInfrastructureExtensionStartup"/>
  </extensions>

</idea-plugin>