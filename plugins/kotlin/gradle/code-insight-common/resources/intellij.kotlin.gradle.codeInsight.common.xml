<idea-plugin visibility="internal" package="org.jetbrains.kotlin.idea.gradleCodeInsightCommon">
  <dependencies>
    <plugin id="com.intellij.gradle"/>
    <plugin id="org.jetbrains.plugins.gradle"/>
    <module name="intellij.kotlin.gradle.tooling"/>
    <module name="intellij.kotlin.gradle.gradle"/>
    <module name="intellij.kotlin.projectWizard.idea"/>
    <module name="kotlin.code-insight.inspections.shared"/>
  </dependencies>

  <extensionPoints>
    <extensionPoint
            qualifiedName="org.jetbrains.kotlin.idea.gradleBuildScriptSupport"
            interface="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.GradleBuildScriptSupport"
            dynamic="true"/>
    <extensionPoint
            qualifiedName="org.jetbrains.kotlin.idea.gradleKotlinInspectionProvider"
            beanClass="com.intellij.lang.LanguageExtensionPoint" dynamic="true">
      <with attribute="implementationClass"
            implements="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.inspections.GradleKotlinInspectionProvider"/>
    </extensionPoint>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <psi.implicitReferenceProvider implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.KotlinGradleProjectReferenceProvider"/>
    <psi.implicitReferenceProvider implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.KotlinGradlePluginReferenceProvider"/>
    <backgroundPostStartupActivity implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.native.KotlinNativeABICompatibilityChecker"/>
    <runConfigurationProducer implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.native.KotlinNativeRunConfigurationProducer"/>

    <externalSystemTaskNotificationListener implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.KotlinConfiguratorExternalSystemSyncListener"/>

    <registryKey
            key="kotlin.configuration.gradle.autoConfig.enabled"
            description="Whether auto-configuration is enabled for Gradle projects when adding a Kotlin file"
            defaultValue="true"
            restartRequired="false"/>

    <localInspection language="UAST" groupPath="Gradle" shortName="RedundantKotlinStdLibDependency"
                     groupBundle="messages.GradleInspectionBundle" groupKey="inspection.best.practises"
                     bundle="messages.KotlinGradleCodeInsightCommonBundle"
                     key="inspection.display.name.redundant.kotlin.std.lib.dependency"
                     enabledByDefault="true" level="WARNING"
                     implementationClass="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.inspections.RedundantKotlinStdLibInspection"/>
  </extensions>

  <extensions defaultExtensionNs="org.jetbrains.kotlin">
    <buildSystemDependencyManager implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.GradleKotlinBuildSystemDependencyManager"/>
    <projectConfigurator implementation="org.jetbrains.kotlin.idea.gradleCodeInsightCommon.native.KotlinNativeGradleConfigurator"/>
  </extensions>
</idea-plugin>