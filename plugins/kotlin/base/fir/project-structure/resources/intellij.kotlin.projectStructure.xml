<idea-plugin visibility="internal" package="org.jetbrains.kotlin.idea.base.fir.projectStructure">
  <dependencies>
    <module name="intellij.kotlin.base.scripting"/>
    <module name="intellij.kotlin.analysis.platform"/>
  </dependencies>

  <extensions defaultExtensionNs="com.intellij">
    <projectService
            serviceInterface="org.jetbrains.kotlin.analysis.api.platform.projectStructure.KotlinProjectStructureProvider"
            serviceImplementation="org.jetbrains.kotlin.idea.base.fir.projectStructure.provider.K2IDEProjectStructureProvider"/>

    <projectService serviceImplementation="org.jetbrains.kotlin.idea.base.fir.projectStructure.kmp.K2ForwardDeclarationScopeProviderImpl"
                    serviceInterface="org.jetbrains.kotlin.idea.base.projectStructure.kmp.K2ForwardDeclarationScopeProvider"/>
  </extensions>

  <extensionPoints>
    <extensionPoint
            qualifiedName="org.jetbrains.kotlin.k2KaModuleFactory"
            interface="org.jetbrains.kotlin.idea.base.fir.projectStructure.FirKaModuleFactory"
            dynamic="true"/>

    <extensionPoint
            qualifiedName="org.jetbrains.kotlin.k2NotUnderContentRootModuleFactory"
            interface="org.jetbrains.kotlin.idea.base.fir.projectStructure.KaNotUnderContentRootModuleFactory"
            dynamic="true"/>
  </extensionPoints>
</idea-plugin>