<idea-plugin>
  <id>org.jetbrains.idea.reposearch</id>
  <name>Artifacts Repository Search</name>
  <vendor>JetBrains</vendor>
  <category>Build Tools</category>
  <description><![CDATA[
    Provides API for artifact search such as Maven/Gradle dependencies.
  ]]></description>

  <dependencies>
    <module name="intellij.libraries.ktor.client"/>
    <module name="intellij.libraries.kotlinx.io"/>
    <module name="intellij.libraries.kotlinx.document.store.mvstore"/>
    <module name="intellij.libraries.kotlinx.coroutines.slf4j"/>
  </dependencies>
  <!--suppress PluginXmlValidity -->
  <content namespace="jetbrains">
    <!-- The implicit main module of the plugin depends on internal modules (intellij.libraries.ktor.client, intellij.libraries.kotlinx.io), so it's required to set the namespace for it
         todo: extract elements and dependencies to an explicit content module (see IJPL-212351) -->
  </content>

  <extensionPoints>
    <extensionPoint name="provider"
                    interface="org.jetbrains.idea.reposearch.DependencySearchProvidersFactory" dynamic="true"/>

    <extensionPoint name="contributor"
                    interface="org.jetbrains.idea.completion.api.DependencyCompletionContributor" dynamic="true"/>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <registryKey key="maven.packagesearch.enabled" defaultValue="false"
                 description="Enable package search dependency via https://package-search.services.jetbrains.com"/>

    <registryKey key="packagesearch.config.url.override" defaultValue="false"
                 description="Package search service config URL override to maven index labs" restartRequired="true"/>

    <registryKey id="org.jetbrains.idea.reposearch.log.debug"
                 key="org.jetbrains.idea.reposearch.log.debug"
                 defaultValue="false"
                 description="Emit in-depth debug logging (warning: very spammy, only useful for debugging data flow issues). Make sure you have this line in Help | Diagnostic Tools | Debug Log Settings: '#org.jetbrains.idea.reposearch:trace'."
                 restartRequired="false"/>

    <statistics.validation.customValidationRule implementation="org.jetbrains.idea.reposearch.statistics.TopPackageIdValidationRule"/>

    <applicationService serviceInterface="org.jetbrains.idea.completion.api.DependencyCompletionService"
                        serviceImplementation="org.jetbrains.idea.completion.impl.DependencyCompletionServiceImpl"/>
  </extensions>

  <extensions defaultExtensionNs="org.jetbrains.idea.reposearch">
    <provider implementation="org.jetbrains.idea.packagesearch.PackageSearchProviderFactory"/>
  </extensions>
</idea-plugin>