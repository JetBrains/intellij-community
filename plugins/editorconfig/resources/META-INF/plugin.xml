<!-- Copyright 2000-2018 JetBrains s.r.o. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->
<idea-plugin>
  <id>org.editorconfig.editorconfigjetbrains</id>
  <name>EditorConfig</name>
  <category>Other Tools</category>
  <vendor>JetBrains</vendor>

  <description><![CDATA[
Adds support for <a href="https://editorconfig.org/">EditorConfig</a> files.

<ul><li>Define code style settings using EditorConfig files</li>
<li>Use coding assistance in EditorConfig files</li></ul>

To create an EditorConfig file in a directory, right-click this directory and select <b>New | EditorConfig File</b>.
<p></p>
<p>Originally developed by Kirill Glazyrin and Kevin Bell.</p>
]]></description>

  <depends>com.intellij.modules.lang</depends>

  <actions>
    <action id="NewEditorConfigFile" class="org.editorconfig.language.codeinsight.actions.CreateEditorConfigFileAction"/>
    <action id="CreateEditorConfigFile" class="org.editorconfig.configmanagement.create.CreateEditorConfigAction"
            text="EditorConfig File" description="Create new EditorConfig file">
      <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFromTemplate"/>
    </action>
  </actions>

  <extensions defaultExtensionNs="com.intellij">
    <!-- Standard support -->
    <applicationService serviceImplementation="org.editorconfig.plugincomponents.EditorConfigNotifier"/>
    <generalCodeStyleOptionsProvider instance="org.editorconfig.settings.EditorConfigConfigurable"/>
    <codeStyleSettingsProvider implementation="org.editorconfig.settings.EditorConfigConfigurable"/>
    <codeStyleSettingsModifier implementation="org.editorconfig.configmanagement.extended.EditorConfigCodeStyleSettingsModifier" order="first"/>
    <fileIndentOptionsProvider implementation="org.editorconfig.configmanagement.EditorConfigIndentOptionsProvider" order="first"/>
    <trailingSpacesOptionsProvider implementation="org.editorconfig.configmanagement.EditorConfigTrailingSpacesOptionsProvider" order="first"/>
    <applicationService serviceImplementation="org.editorconfig.plugincomponents.SettingsProviderComponent"/>
    <fileEditorProvider implementation="org.editorconfig.configmanagement.editor.EditorConfigEditorProvider"/>
    <codeInsight.lineMarkerProvider language="" implementationClass="org.editorconfig.configmanagement.editor.EditorConfigPreviewMarkerProvider"/>
    <projectService serviceImplementation="org.editorconfig.configmanagement.editor.EditorConfigPreviewManager"/>
    <gotoFileContributor implementation="org.editorconfig.configmanagement.finder.EditorConfigGotoFileContributor"/>
    <stripTrailingSpacesFilterFactory implementation="org.editorconfig.configmanagement.EditorConfigTrailingSpacesFilterFactory"/>

    <!-- Language support -->
    <fileType name="EditorConfig" 
              language="EditorConfig" 
              implementationClass="org.editorconfig.language.filetype.EditorConfigFileType"
              fieldName="INSTANCE"
              fileNames=".editorconfig"/>
    <colorSettingsPage implementation="org.editorconfig.language.highlighting.EditorConfigColorSettingsPage"/>
    <annotator
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.annotators.EditorConfigAnnotator"/>
    <enterHandlerDelegate implementation="org.editorconfig.language.codeinsight.actions.EnterInEditorConfigFileHandler"/>
    <vetoRenameCondition implementation="org.editorconfig.language.codeinsight.refactoring.EditorConfigVetoRenameCondition"/>
    <completion.contributor
        language="EditorConfig"
        id="EditorConfigCompletionContributor"
        order="last"
        implementationClass="org.editorconfig.language.codeinsight.completion.EditorConfigCompletionContributor"/>
    <langCodeStyleSettingsProvider implementation="org.editorconfig.language.codestyle.EditorConfigLanguageCodeStyleSettingsProvider"/>
    <statementUpDownMover implementation="org.editorconfig.language.codeinsight.actions.EditorConfigStatementUpDownMover"/>
    <moveLeftRightHandler
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.actions.EditorConfigMoveElementLeftRightHandler"/>
    <spellchecker.support
        language="EditorConfig"
        implementationClass="org.editorconfig.language.spellchecker.EditorConfigSpellcheckerStrategy"/>
    <typedHandler implementation="org.editorconfig.language.codeinsight.actions.EditorConfigTypedHandlerDelegate"/>
    <findUsagesHandlerFactory implementation="org.editorconfig.language.codeinsight.findusages.EditorConfigFindUsagesHandlerFactory"/>
    <breadcrumbsInfoProvider implementation="org.editorconfig.language.breadcrumbs.EditorConfigBreadcrumbsProvider"/>
    <renameHandler implementation="org.editorconfig.language.codeinsight.refactoring.EditorConfigRenameHandler"/>
    <elementDescriptionProvider
        implementation="org.editorconfig.language.codeinsight.documentation.EditorConfigElementDescriptionProvider"/>
    <editorNotificationProvider implementation="org.editorconfig.language.messages.EditorConfigWrongFileNameNotificationProvider"/>
    <editorNotificationProvider implementation="org.editorconfig.language.messages.EditorConfigWrongFileEncodingNotificationProvider"/>
    <fileBasedIndex implementation="org.editorconfig.language.index.EditorConfigIdentifierIndex"/>
    <gotoSymbolContributor implementation="org.editorconfig.language.codeinsight.findusages.EditorConfigGoToSymbolContributor"/>
    <gotoTargetRendererProvider
        implementation="org.editorconfig.language.codeinsight.actions.navigation.EditorConfigGotoTargetRendererProvider"/>
    <definitionsScopedSearch
        implementation="org.editorconfig.language.codeinsight.actions.navigation.EditorConfigHeaderImplementationSearch"/>
    <definitionsScopedSearch
        implementation="org.editorconfig.language.codeinsight.actions.navigation.EditorConfigFlatOptionKeyImplementationSearch"/>
    <targetElementEvaluator
        language="EditorConfig"
        implementationClass="org.editorconfig.language.psi.reference.EditorConfigTargetElementEvaluator"/>

    <editorFactoryListener implementation="org.editorconfig.configmanagement.EditorSettingsManager"/>
    <fileDocumentManagerListener implementation="org.editorconfig.configmanagement.EncodingManager"/>
    <fileDocumentManagerListener implementation="org.editorconfig.configmanagement.LineEndingsManager"/>

    <!-- Inspections -->
    <lang.inspectionSuppressor
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.suppression.EditorConfigInspectionSuppressor"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigDeprecatedDescriptor"
        bundle="messages.EditorConfigBundle"
        key="inspection.element.deprecated.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigDeprecatedDescriptorInspection"/>

    <!-- Root declaration inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigRootDeclarationUniqueness"
        bundle="messages.EditorConfigBundle"
        key="inspection.root-declaration.uniqueness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigRootDeclarationUniquenessInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigRootDeclarationCorrectness"
        bundle="messages.EditorConfigBundle"
        key="inspection.root-declaration.correctness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigRootDeclarationCorrectnessInspection"/>

    <!-- Section inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigEmptySection"
        bundle="messages.EditorConfigBundle"
        key="inspection.section.emptiness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigEmptySectionInspection"/>

    <!-- Header inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigHeaderUniqueness"
        bundle="messages.EditorConfigBundle"
        key="inspection.section.uniqueness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigHeaderUniquenessInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigPatternEnumerationRedundancy"
        bundle="messages.EditorConfigBundle"
        key="inspection.pattern-enumeration.redundant.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigPatternEnumerationRedundancyInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigSpaceInHeader"
        bundle="messages.EditorConfigBundle"
        key="inspection.space.in.header.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WEAK WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigSpaceInHeaderInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigNoMatchingFiles"
        bundle="messages.EditorConfigBundle"
        key="inspection.no-matching-files.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigNoMatchingFilesInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigNumerousWildcards"
        bundle="messages.EditorConfigBundle"
        key="inspection.header.many.wildcards.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WEAK WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigNumerousWildcardsInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigEmptyHeader"
        bundle="messages.EditorConfigBundle"
        key="inspection.header.empty.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigEmptyHeaderInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigPartialOverride"
        bundle="messages.EditorConfigBundle"
        key="inspection.header.partially.overridden.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WEAK WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigPartialOverrideInspection"/>

    <!-- Pattern inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigPatternRedundancy"
        bundle="messages.EditorConfigBundle"
        key="inspection.pattern.redundant.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigPatternRedundancyInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigWildcardRedundancy"
        bundle="messages.EditorConfigBundle"
        key="inspection.pattern.double-asterisk-sibling.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigWildcardRedundancyInspection"/>

    <!-- Charclass inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigCharClassLetterRedundancy"
        bundle="messages.EditorConfigBundle"
        key="inspection.charclass.duplicate.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigCharClassLetterRedundancyInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigCharClassRedundancy"
        bundle="messages.EditorConfigBundle"
        key="inspection.charclass.redundant.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigCharClassRedundancyInspection"/>

    <!-- Option inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigShadowedOption"
        bundle="messages.EditorConfigBundle"
        key="inspection.option.shadowed.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigShadowedOptionInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigShadowingOption"
        bundle="messages.EditorConfigBundle"
        key="inspection.option.shadowing.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigShadowingOptionInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigOptionRedundancy"
        bundle="messages.EditorConfigBundle"
        key="inspection.option.redundant.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigOptionRedundancyInspection"/>

    <!-- Key inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigKeyCorrectness"
        bundle="messages.EditorConfigBundle"
        key="inspection.key.correctness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigKeyCorrectnessInspection"/>

    <!-- Value inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigValueCorrectness"
        bundle="messages.EditorConfigBundle"
        key="inspection.value.correctness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigValueCorrectnessInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigValueUniqueness"
        bundle="messages.EditorConfigBundle"
        key="inspection.value.uniqueness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigValueUniquenessInspection"/>

    <!-- Reference inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigReferenceCorrectness"
        bundle="messages.EditorConfigBundle"
        key="inspection.reference.correctness.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigReferenceCorrectnessInspection"/>

    <!-- Declaration inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigUnusedDeclaration"
        bundle="messages.EditorConfigBundle"
        key="inspection.declaration.unused.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="WARNING"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigUnusedDeclarationInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigMissingRequiredDeclaration"
        bundle="messages.EditorConfigBundle"
        key="inspection.declaration.missing.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigMissingRequiredDeclarationInspection"/>

    <!-- Values list inspections -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigListAcceptability"
        bundle="messages.EditorConfigBundle"
        key="inspection.value.list.acceptability.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigListAcceptabilityInspection"/>
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigUnexpectedComma"
        bundle="messages.EditorConfigBundle"
        key="inspection.value.list.comma.unexpected.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigUnexpectedCommaInspection"/>

    <!-- Values pair inspection -->
    <localInspection
        language="EditorConfig"
        shortName="EditorConfigPairAcceptability"
        bundle="messages.EditorConfigBundle"
        key="inspection.value.pair.acceptability.name"
        groupKey="editorconfig.inspection.group"
        enabledByDefault="true"
        level="ERROR"
        implementationClass="org.editorconfig.language.codeinsight.inspections.EditorConfigPairAcceptabilityInspection"/>

    <!-- Intention actions -->
    <intentionAction>
      <className>org.editorconfig.language.codeinsight.actions.intention.EditorConfigInvertValueIntention</className>
      <category>EditorConfig</category>
    </intentionAction>
    <intentionAction>
      <className>org.editorconfig.language.codeinsight.actions.intention.EditorConfigAddDeclarationPartIntention</className>
      <category>EditorConfig</category>
    </intentionAction>

    <!-- Services -->
    <applicationService
        serviceInterface="org.editorconfig.language.services.EditorConfigOptionDescriptorManager"
        serviceImplementation="org.editorconfig.language.services.impl.EditorConfigOptionDescriptorManagerImpl"/>
    <projectService
        serviceInterface="org.editorconfig.language.services.EditorConfigElementFactory"
        serviceImplementation="org.editorconfig.language.services.impl.EditorConfigElementFactoryImpl"/>
    <projectService
        serviceInterface="org.editorconfig.language.services.EditorConfigFileHierarchyService"
        serviceImplementation="org.editorconfig.language.services.impl.EditorConfigFileHierarchyServiceImpl"/>

    <schemeExporter
        name="EditorConfig File"
        schemeClass="com.intellij.psi.codeStyle.CodeStyleScheme"
        implementationClass="org.editorconfig.configmanagement.export.EditorConfigExporter"/>
    <notificationWhitelist groupIds="EditorConfig;editorconfig"/>
  </extensions>


  <extensions defaultExtensionNs="com.intellij.lang">
    <syntaxHighlighterFactory
        language="EditorConfig"
        implementationClass="org.editorconfig.language.highlighting.EditorConfigSyntaxHighlighterFactory"/>
    <parserDefinition
        language="EditorConfig"
        implementationClass="org.editorconfig.language.parser.EditorConfigParserDefinition"/>
    <braceMatcher
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.EditorConfigBraceMatcher"/>
    <commenter
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.EditorConfigCommenter"/>
    <foldingBuilder
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.EditorConfigFoldingBuilder"/>
    <formatter
        language="EditorConfig"
        implementationClass="org.editorconfig.language.formatting.EditorConfigFormattingModelBuilder"/>
    <psiStructureViewFactory
        language="EditorConfig"
        implementationClass="org.editorconfig.language.structureview.EditorConfigStructureViewFactory"/>
    <elementManipulator
        forClass="org.editorconfig.language.psi.EditorConfigHeader"
        implementationClass="org.editorconfig.language.psi.EditorConfigSilentElementManipulator"/>
    <elementManipulator
        forClass="org.editorconfig.language.psi.interfaces.EditorConfigDescribableElement"
        implementationClass="org.editorconfig.language.psi.EditorConfigSilentElementManipulator"/>
    <findUsagesProvider
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.findusages.EditorConfigFindUsagesProvider"/>
    <documentationProvider
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.documentation.EditorConfigDocumentationProvider"/>
    <tokenSeparatorGenerator
        language="EditorConfig"
        implementationClass="org.editorconfig.language.psi.EditorConfigTokenSeparatorGenerator"/>
  </extensions>


  <extensions defaultExtensionNs="com.intellij.codeInsight">
    <lineMarkerProvider
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.linemarker.EditorConfigOverridingKeyLineMarkerProvider"/>
    <lineMarkerProvider
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.linemarker.EditorConfigOverriddenKeyLineMarkerProvider"/>
    <lineMarkerProvider
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.linemarker.EditorConfigOverridingHeaderLineMarkerProvider"/>
    <lineMarkerProvider
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.linemarker.EditorConfigOverriddenHeaderLineMarkerProvider"/>
    <gotoSuper
        language="EditorConfig"
        implementationClass="org.editorconfig.language.codeinsight.actions.navigation.EditorConfigGotoSuperHandler"/>
  </extensions>

  <extensions defaultExtensionNs="editorconfig">
    <optionDescriptorProvider implementation="org.editorconfig.language.extensions.impl.EditorConfigBasicOptionDescriptorProvider"/>
    <optionDescriptorProvider implementation="org.editorconfig.language.extensions.impl.EditorConfigRoslynOptionDescriptorProvider"/>
    <optionDescriptorProvider implementation="org.editorconfig.language.extensions.impl.EditorConfigReSharperOptionDescriptorProvider"/>
    <optionDescriptorProvider implementation="org.editorconfig.configmanagement.extended.IntellijConfigOptionDescriptorProvider"/>
  </extensions>


  <extensionPoints>
    <extensionPoint
        qualifiedName="editorconfig.optionDescriptorProvider"
        interface="org.editorconfig.language.extensions.EditorConfigOptionDescriptorProvider"/>
    <extensionPoint qualifiedName="editorconfig.exportProvider" interface="org.editorconfig.settings.EditorConfigExportProvider"/>
  </extensionPoints>

  <applicationListeners>
    <listener class="org.editorconfig.plugincomponents.EditorConfigModificationListener" topic="com.intellij.openapi.vfs.newvfs.BulkFileListener"/>
  </applicationListeners>
</idea-plugin>
