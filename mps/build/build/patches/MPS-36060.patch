Index: platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt b/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt
--- a/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt	(revision 2009584ac1359e2f11097dd44cf6165c97df5d57)
+++ b/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt	(date 1696338647664)
@@ -1223,16 +1223,15 @@
         it.execute(project)
       }
 
+      project.createComponentsNonBlocking()
+
       projectInitObserver?.rawProjectDeferred?.complete(project)
 
       if (preloadServices) {
         schedulePreloadServices(project)
       }
 
-      launch {
-        beforeComponentCreation?.join()
-        project.createComponentsNonBlocking()
-      }
+      beforeComponentCreation?.join()
 
       if (!isTrusted.await()) {
         throw CancellationException("not trusted")
