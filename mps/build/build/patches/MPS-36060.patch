Index: platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt b/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt
--- a/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt	(revision 21cf7720cefd5756007a45f97b5a015d86212d19)
+++ b/platform/platform-impl/src/com/intellij/openapi/project/impl/ProjectManagerImpl.kt	(date 1749546444312)
@@ -1331,6 +1331,8 @@
     coroutineScope {
       val preInitJob = projectInitHelper?.launchPreInit(project)
 
+      project.createComponentsNonBlocking()
+
       runApprovedExtensions(project, "com.intellij.projectPreInit", essentialOnly = false)
 
       projectInitHelper?.notifyInit(project)
@@ -1340,7 +1342,6 @@
       }
 
       preInitJob?.join()
-      project.createComponentsNonBlocking()
     }
   }
   catch (initThrowable: Throwable) {
 