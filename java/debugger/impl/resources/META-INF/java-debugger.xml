<idea-plugin>

  <resource-bundle>messages.ActionsBundle</resource-bundle>

  <projectListeners>
    <listener class="com.intellij.debugger.impl.DebuggerManagerImpl$DebuggerRunContentWithExecutorListener" topic="com.intellij.xdebugger.XDebuggerManagerListener"/>
    <listener class="com.intellij.debugger.impl.HotSwapManager$HotSwapDebuggerManagerListener"
              topic="com.intellij.debugger.impl.DebuggerManagerListener"/>
    <listener class="com.intellij.debugger.ui.HotSwapUIImpl$HotSwapDebuggerManagerListener"
              topic="com.intellij.debugger.impl.DebuggerManagerListener"/>
  </projectListeners>

  <extensionPoints>
    <extensionPoint qualifiedName="com.intellij.debugger.codeFragmentFactory"
                    interface="com.intellij.debugger.engine.evaluation.CodeFragmentFactory" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.nodeRenderer"
                    interface="com.intellij.debugger.ui.tree.render.NodeRenderer" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.compoundRendererProvider"
                    interface="com.intellij.debugger.ui.tree.render.CompoundRendererProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.javaDebugAware"
                    interface="com.intellij.debugger.engine.JavaDebugAware" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.javaBreakpointHandlerFactory"
                    interface="com.intellij.debugger.engine.JavaBreakpointHandlerFactory" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.positionManagerFactory"
                    interface="com.intellij.debugger.PositionManagerFactory" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.debugger.jvmSmartStepIntoHandler"
                    interface="com.intellij.debugger.actions.JvmSmartStepIntoHandler" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.debugger.jvmSteppingCommandProvider"
                    interface="com.intellij.debugger.impl.JvmSteppingCommandProvider" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.debugger.jdiHelperClassLoader"
                    interface="com.intellij.debugger.impl.JdiHelperClassLoader" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.frameExtraVarsProvider"
                    interface="com.intellij.debugger.engine.FrameExtraVariablesProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.asyncStackTraceProvider"
                    interface="com.intellij.debugger.engine.AsyncStackTraceProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.creationStackTraceProvider"
                    interface="com.intellij.debugger.engine.CreationStackTraceProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.sourcePositionProvider"
                    interface="com.intellij.debugger.engine.SourcePositionProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.simplePropertyGetterProvider"
                    interface="com.intellij.debugger.engine.SimplePropertyGetterProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.syntheticProvider"
                    interface="com.intellij.debugger.engine.SyntheticTypeComponentProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.fieldVisibilityProvider"
                    interface="com.intellij.debugger.engine.FieldVisibilityProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.extraSteppingFilter"
                    interface="com.intellij.debugger.engine.ExtraSteppingFilter" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.sourcePositionHighlighter"
                    interface="com.intellij.debugger.engine.SourcePositionHighlighter" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debugger.nodeNameAdjuster"
                    interface="com.intellij.debugger.ui.tree.NodeDescriptorNameAdjuster" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.debugger.additionalContextProvider"
                    interface="com.intellij.debugger.engine.evaluation.AdditionalContextProvider" dynamic="true"/>

    <extensionPoint qualifiedName="com.intellij.debuggerEditorTextProvider" beanClass="com.intellij.lang.LanguageExtensionPoint"
                    dynamic="true">
      <with attribute="implementationClass" implements="com.intellij.debugger.impl.EditorTextProvider"/>
    </extensionPoint>

    <extensionPoint qualifiedName="com.intellij.debugger.dfaAssistProvider" beanClass="com.intellij.lang.LanguageExtensionPoint"
                    dynamic="true">
      <with attribute="implementationClass" implements="com.intellij.debugger.engine.dfaassist.DfaAssistProvider"/>
    </extensionPoint>
    <extensionPoint qualifiedName="com.intellij.debugger.extraDebugNodesProvider"
                    interface="com.intellij.debugger.ui.tree.ExtraDebugNodesProvider" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.debugger.steppingListener"
                    interface="com.intellij.debugger.engine.SteppingListener" dynamic="true"/>
    <extensionPoint qualifiedName="com.intellij.debugger.dumpItemsProvider"
                    interface="com.intellij.debugger.impl.ThreadDumpItemsProviderFactory" dynamic="true"/>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <applicationService serviceInterface="com.intellij.debugger.engine.DebuggerUtils"
                        serviceImplementation="com.intellij.debugger.impl.DebuggerUtilsImpl"/>
    <applicationService serviceImplementation="com.intellij.debugger.settings.NodeRendererSettings"/>
    <applicationService serviceImplementation="com.intellij.debugger.settings.ViewsGeneralSettings"/>
    <projectService serviceImplementation="com.intellij.debugger.settings.DebuggerProjectSettings"/>
    <applicationService serviceImplementation="com.intellij.debugger.settings.ThreadsViewSettings"/>
    <applicationService serviceImplementation="com.intellij.debugger.settings.TraceSettings"/>
    <projectService serviceInterface="com.intellij.debugger.ui.HotSwapUI" serviceImplementation="com.intellij.debugger.ui.HotSwapUIImpl"/>
    <xdebugger.hotSwapInDebugSessionEnabler implementation="com.intellij.debugger.impl.hotswap.JvmHotSwapInDebugSessionEnabler"/>
    <projectService serviceInterface="com.intellij.debugger.DebuggerManager"
                    serviceImplementation="com.intellij.debugger.impl.DebuggerManagerImpl"/>
    <debugger.additionalContextProvider implementation="com.intellij.debugger.engine.evaluation.MarkedObjectAdditionalContextProvider"/>
    <debugger.jdiHelperClassLoader implementation="com.intellij.debugger.impl.JdiHelperClassLoaderImpl"/>
    <debuggerEditorTextProvider language="JAVA" implementationClass="com.intellij.debugger.impl.JavaEditorTextProviderImpl"/>
    <javaExpressionSurrounder implementation="com.intellij.debugger.codeinsight.JavaWithRuntimeCastSurrounder"/>

    <daemon.highlightInfoFilter implementation="com.intellij.debugger.engine.evaluation.DebuggerHighlightFilter"/>
    <editorNotificationProvider implementation="com.intellij.debugger.ui.AlternativeSourceNotificationProvider"/>
    <keymapExtension implementation="com.intellij.debugger.actions.DebuggerKeymapExtension"/>

    <xdebugger.settings implementation="com.intellij.debugger.settings.JavaDebuggerSettings"/>
    <registryKey key="execution.java.always.debug" defaultValue="false" description="Always run java processes with the debug agent"/>

    <xdebugger.breakpointGroupingRule implementation="com.intellij.debugger.ui.XBreakpointGroupingByPackageRule"/>
    <xdebugger.breakpointGroupingRule implementation="com.intellij.debugger.ui.XBreakpointGroupingByClassRule"/>

    <projectConfigurable parentId="project.propDebugger" instance="com.intellij.debugger.settings.CaptureConfigurable"
                         key="async.stacktraces.configurable.display.name" bundle="messages.JavaDebuggerBundle"/>

    <xdebugger.attachDebuggerProvider implementation="com.intellij.debugger.impl.attach.JavaAttachDebuggerProvider"/>
    <xdebugger.attachDebuggerProvider implementation="com.intellij.debugger.impl.attach.JavaSAAttachDebuggerProvider"/>
    <xdebugger.dialog.item.presentation.provider implementation="com.intellij.debugger.impl.attach.JavaAttachDebuggerProvider$JavaAttachDialogItemPresentationProvider"/>

    <consoleFilterProvider implementation="com.intellij.debugger.impl.attach.JavaDebuggerConsoleFilterProvider"/>
    <jvm.exceptionFilter implementation="com.intellij.debugger.impl.attach.JavaDebuggerAddExceptionBreakpointFilter"/>

    <xdebugger.breakpointType implementation="com.intellij.debugger.ui.breakpoints.JavaCollectionBreakpointType"/>
    <xdebugger.breakpointType implementation="com.intellij.debugger.ui.breakpoints.JavaMethodBreakpointType"/>
    <xdebugger.breakpointType implementation="com.intellij.debugger.ui.breakpoints.JavaWildcardMethodBreakpointType"/>
    <xdebugger.breakpointType implementation="com.intellij.debugger.ui.breakpoints.JavaFieldBreakpointType"/>
    <xdebugger.breakpointType implementation="com.intellij.debugger.ui.breakpoints.JavaExceptionBreakpointType"/>
    <xdebugger.breakpointType implementation="com.intellij.debugger.ui.breakpoints.JavaLineBreakpointType"/>
    <debugger.jvmSmartStepIntoHandler implementation="com.intellij.debugger.actions.JavaSmartStepIntoHandler" order="last"/>

    <debugger.simplePropertyGetterProvider implementation="com.intellij.debugger.engine.JavaSimpleGetterProvider"/>
    <debugger.syntheticProvider implementation="com.intellij.debugger.engine.DefaultSyntheticProvider"/>
    <debugger.sourcePositionProvider implementation="com.intellij.debugger.engine.DefaultSourcePositionProvider" order="last"/>
    <debugger.sourcePositionHighlighter implementation="com.intellij.debugger.engine.JavaSourcePositionHighlighter"/>
    <java.elementFinder implementation="com.intellij.debugger.impl.AlternativeJreClassFinder" order="last"/>

    <debugger.asyncStackTraceProvider
      implementation="com.intellij.debugger.ui.breakpoints.StackCapturingLineBreakpoint$CaptureAsyncStackTraceProvider"/>
    <debugger.dumpItemsProvider implementation="com.intellij.debugger.actions.JavaVirtualThreadsProvider"/>
    <xdebugger.controlExceptionBreakpointSupport implementation="com.intellij.debugger.codeinsight.ControlExceptionBreakpointJVMSupport"/>
    <iconProvider implementation="com.intellij.debugger.engine.evaluation.AdditionalContextIconProvider"/>

    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$BooleanRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$ByteRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$CharacterRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$ShortRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$IntegerRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$LongRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$FloatRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.UnboxableTypeRenderer$DoubleRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.ColorObjectRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.ImageObjectRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.IconObjectRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.GraphicsObjectRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.BinaryRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.TimestampRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.ByteArrayAsStringRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.FileObjectRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.StackTraceElementObjectRenderer"/>
    <debugger.compoundRendererProvider implementation="com.intellij.debugger.ui.tree.render.ClassObjectRenderer"/>

    <debugger.nodeNameAdjuster implementation="com.intellij.debugger.ui.impl.watch.FieldOuterLocalNameAdjuster"/>

    <programRunner implementation="com.intellij.debugger.impl.attach.JavaAttachDebuggerProvider$ProcessAttachDebuggerRunner" order="last"/>
    <programRunner id="defaultDebugRunner" implementation="com.intellij.debugger.impl.GenericDebuggerRunner" order="last"/>

    <notificationGroup id="HotSwap" displayType="TOOL_WINDOW" toolWindowId="Debug" bundle="messages.JavaDebuggerBundle"
                       key="notification.group.hotswap"/>

    <debugger.dfaAssistProvider language="JAVA" implementationClass="com.intellij.debugger.engine.dfaassist.java.JavaDfaAssistProvider"/>

    <statistics.counterUsagesCollector implementationClass="com.intellij.debugger.actions.JavaDebuggerActionsCollector"/>
    <statistics.applicationUsagesCollector implementation="com.intellij.debugger.settings.DebuggerSettingsStatisticsCollector"/>
    <statistics.counterUsagesCollector implementationClass="com.intellij.debugger.statistics.DebuggerStatistics"/>
    <statistics.counterUsagesCollector
      implementationClass="com.intellij.debugger.engine.evaluation.statistics.JavaDebuggerEvaluatorStatisticsCollector"/>
    <statistics.counterUsagesCollector implementationClass="com.intellij.debugger.ui.breakpoints.JavaBreakpointsUsageCollector"/>

    <statistics.validation.customValidationRule implementation="com.intellij.debugger.statistics.ThreadDumpTriggeringExceptionValidator"/>

    <feedback.idleFeedbackSurvey implementation="com.intellij.debugger.feedback.KotlinDebuggerFeedbackSurvey"/>
    <debugger.steppingListener implementation="com.intellij.debugger.engine.CancelingSteppingListener"/>

    <registryKey key="debugger.evaluate.method.helper" defaultValue="[off|auto*|always]"
                 description="Use helper to invoke methods avoiding the immediate return value collection"/>
    <registryKey key="debugger.jdwp.include.virtual.threads" defaultValue="false"
                 description="JDWP setting to include virtual threads in the list of all threads (might lead to problems in case of a huge number of virtual threads)"/>
    <registryKey key="debugger.thread.dump.extended" defaultValue="true"
                 description="Try to get extended thread dump (virtual threads, coroutines, ...) during debugger's Get Thread Dump action"/>
    <registryKey key="debugger.thread.dump.suspension.timeout.ms" defaultValue="500"
                 description="Timeout (in ms) for Get Thread Dump action to wait before suspending the VM to perform extended dump collection (virtual threads, coroutines, ...)"/>
    <registryKey key="debugger.thread.dump.include.virtual.threads" defaultValue="true"
                 description="Try to get virtual threads during debugger's Get Thread Dump action"/>
    <registryKey key="debugger.thread.dump.virtual.threads.with.monitors.max.count" defaultValue="1000"
                 description="Maximum number of virtual threads when debugger still tries to collect information about owned/contended monitors"/>
    <registryKey key="debugger.evaluate.on.pause" defaultValue="true"
                 description="Provide evaluatable context on Pause"/>
    <registryKey key="debugger.evaluate.on.pause.timeout.ms" defaultValue="500"
                 description="Maximum duration (in ms) of obtaining an evaluatable context for a Pause"/>
    <registryKey key="debugger.enable.breakpoints.during.evaluation" defaultValue="false"
                 description="Allow breakpoints to be hit while evaluating expressions"/>
    <registryKey key="debugger.collectible.value.retries.error" defaultValue="true"
                 description="Drop an error if there were too many debugger collectible value retries"/>
    <registryKey key="debugger.run.suspend.helper" defaultValue="true"
                 description="Run suspend helper by debug agent"/>
    <registryKey key="debugger.new.suspend.state.tracking" defaultValue="true"
                 description="Instead of making symmetrical suspend/resume operation, the end of operation returns the thread into the required state"/>
    <registryKey key="debugger.filter.breakpoints.by.coroutine.id" defaultValue="true"
                 description="When enabled uses unique coroutine id to filter stepping"/>
    <registryKey key="debugger.how.to.switch.to.suspend.all" defaultValue="[IMMEDIATE_PAUSE*|PAUSE_WAITING_EVALUATION|METHOD_BREAKPOINT|DISABLE]"
                 description="It is a way how the debugger engine will switch from suspend-thread context to suspend-all context"/>
    <registryKey key="coroutine.panel.live.update" defaultValue="false"
                 description="When enabled, Coroutine View will update its contents after every step. By default, the Coroutine View is collapsed after every step in favor of stepping performance."/>
    <registryKey key="coroutine.panel.show.jobs.hierarchy" defaultValue="true"
                 description="When enabled, Coroutine View displays the hierarchy of coroutine jobs; otherwise, it shows coroutines grouped by dispatchers."/>
    <registryKey key="debugger.compiling.evaluator" defaultValue="true"
                 description="Allow to compile the code before evaluation if needed"/>
    <registryKey key="debugger.compiling.evaluator.force" defaultValue="false"
                 description="Always compile the code before evaluation"/>
    <registryKey key="debugger.compiling.evaluator.magic.accessor" defaultValue="false"
                 description="Allow access to private members via generated accessor methods in the compiling evaluator"/>
    <registryKey key="debugger.compiling.evaluator.reflection.access.with.java8" defaultValue="true"
                 description="Allow reflective access in the compiling evaluator compatible with Java 8 rules"/>
    <registryKey key="debugger.compiling.evaluator.extract.generated.class" defaultValue="true"
                 description="Extract the generated class to a separate file (only for java versions lower than 11)"/>
    <registryKey key="debugger.auto.fetch.icons" defaultValue="true"
                 description="Automatically request icons for objects shown in debugger views when available"/>
    <registryKey key="debugger.async.stacks.flows" defaultValue="true"
                 description="Enable async stack traces for MutableSharedFlow"/>
    <registryKey key="debugger.async.stacks.state.flows" defaultValue="true"
                 description="Enable async stack traces for MutableStateFlow"/>
    <registryKey key="debugger.async.stack.trace.for.exceptions.printing" defaultValue="true"
                 description="Include async stack trace in exceptions' printed stack trace"/>
    <registryKey key="debugger.keep.step.requests" defaultValue="false"
                 description="Keep step requests active after a step completes (for advanced troubleshooting)"/>
    <registryKey key="debugger.enable.memory.view" defaultValue="true"
                 description="Enable the Memory view/tool window in the debugger"/>
    <registryKey key="debugger.enable.overhead.monitor" defaultValue="true"
                 description="Enable the debugger overhead monitor to track evaluation cost"/>
    <registryKey key="debugger.memory.agent.debug" defaultValue="false"
                 description="Enable debug logging to stdout from a memory agent"/>
    <registryKey key="debugger.memory.agent.debug.path" defaultValue=""
                 description="Force the debugger to use the specified memory agent library instead of the bundled one (only for debugging purposes). Will be used only if debugger.memory.agent.debug checked"/>
    <registryKey key="debugger.memory.agent.action.timeout" defaultValue="-1"
                 description="Set debugger memory agent action timeout in millis"/>
    <registryKey key="debugger.memory.agent.use.in.memory.view" defaultValue="true"
                 description="Use memory agent to estimate retained sizes in the Instances Window"/>
    <registryKey key="debugger.async.stack.trace.for.all.threads" defaultValue="true"
                 description="Get async stack trace for any thread using the same evaluationContext. By default debugger-agent only returns async stack trace for the current suspended thread."/>
    <registryKey key="debugger.stepping.current.thread.check.timeout.ms" defaultValue="100"
                 description="In the 'Resume only the current thread mode': Check timeout (in ms) for the stepping thread is running."/>
    <registryKey key="debugger.evaluation.runtime.type" defaultValue="500"
                 description="Timeout (in ms) to evaluate runtime type of a given expression"/>
    <registryKey key="debugger.run.to.cursor.any.hit.timeout.ms" defaultValue="1000"
                 description="The timeout between the hit run-to-cursor breakpoint in another thread/coroutine and pause the debugger"/>
    <registryKey key="debugger.run.to.cursor.waited.threads.limit" defaultValue="1"
                 description="How many of threads allow to wait on the hit run-to-cursor breakpoint for the desired hit"/>"/>
    <registryKey key="debugger.log.jdi.in.unit.tests" defaultValue="false"
                 description="Enable full JDI logging under DebugProcessImpl.LOG.debug for unit tests"/>

    <registryKey key="debugger.track.instrumentation" defaultValue="true"
                 description="Track class instrumentation events during debugging"/>
    <registryKey key="debugger.attach.to.process.action" defaultValue="false"
                 description="Show the &quot;Attach to Process&quot; action in the run/debug tool window"/>
    <registryKey key="debugger.sa.jdwp.debug" defaultValue="false"
                 description="Enable additional JDWP debug logging for the shared agent"/>
    <registryKey key="debugger.add.rt.jar" defaultValue="true"
                 description="Add rt.jar to the classpath"/>
    <registryKey key="debugger.evaluate.load.helper.in.separate.classloader" defaultValue="false"
                 description="Always load helper classes in a new classloader"/>
    <registryKey key="debugger.new.invocation.watcher" defaultValue="true"
                 description="When resuming all, take into account the debugger model state of contexts and their resumed threads"/>
    <registryKey key="debugger.retry.conditional.breakpoints" defaultValue="true"
                 description="Retry to evaluate a condition in conditional breakpoints in the case of ObjectCollectedException"/>
    <registryKey key="debugger.filter.breakpoints.during.stepping.using.debugger.engine" defaultValue="false"
                 description="When enabled, uses the old mechanism to disable all events in other threads during stepping via applying JDI thread filter"/>
    <registryKey key="debugger.call.tracing.arguments" defaultValue="true"
                 description="Include method arguments in call tracing"/>
    <registryKey key="debugger.renderers.annotations" defaultValue="true"
                 description="Enable rendering values using annotations when available"/>
    <registryKey key="debugger.jb.jdi" defaultValue="true"
                 description="Use the new forked JDI implementation"/>
    <registryKey key="debugger.async.jdi" defaultValue="true"
                 description="Use async JDI to speed up JDWP communication"/>
    <registryKey key="debugger.async.frames" defaultValue="true"
                 description="Collect and show asynchronous call frames in stack traces"/>
    <registryKey key="debugger.preload.event.info" defaultValue="true"
                 description="Preload frequently used JDWP event info to reduce latency"/>
    <registryKey key="debugger.preload.types.async" defaultValue="true"
                 description="Preload the list of loaded classes asynchronously to reduce latency"/>
    <registryKey key="debugger.preload.types.hierarchy" defaultValue="true"
                 description="Request superclass and interfaces for each loaded class in advance to speed up further operations"/>
    <registryKey key="debugger.evaluate.single.threaded.timeout" defaultValue="1000"
                 description="Number of milliseconds to evaluate resuming only the current thread, then resume all threads"/>
    <registryKey key="debugger.renderers.file" defaultValue="true"
                 description="Enable file object renderer"/>
    <registryKey key="debugger.renderers.arrays" defaultValue="true"
                 description="Show the first elements for primitive and string arrays"/>
    <registryKey key="debugger.renderers.arrays.max.primitives" defaultValue="100"
                 description="Number of primitive values to show"/>
    <registryKey key="debugger.renderers.arrays.max.strings" defaultValue="5"
                 description="Number of string values to show"/>
    <registryKey key="debugger.sync.commands.max.retries" defaultValue="5"
                 description="Maximum number of times a synchronous debugger command may be rescheduled"/>
    <registryKey key="debugger.sync.commands.reschedule.delay" defaultValue="50"
                 description="Delay in milliseconds before rescheduling synchronous debugger commands to allow async tasks to finish; negative disables rescheduling"/>
    <registryKey key="debugger.auto.attach.from.any.console" defaultValue="false"
                 description="Auto-attach to all processes from any console output"/>
    <registryKey key="debugger.auto.attach.from.console" defaultValue="false"
                 description="Auto-attach to all processes available for debug from the console output"/>
    <registryKey key="debugger.show.offsets.in.frames" defaultValue="false"
                 description="Show instruction offset in the frames view"/>
    <registryKey key="debugger.stop.on.graceful.exit" defaultValue="true"
                 description="Immediately detach the debugger when a process is about to terminate"/>
    <registryKey key="debugger.stack.frame.show.code.index" defaultValue="false"
                 description="Show the bytecode index next to the line number for stack frames"/>
    <registryKey key="debugger.method.breakpoints.entry.default" defaultValue="true"
                 description="Stop only on method entry by default"/>
    <registryKey key="debugger.emulate.method.breakpoints" defaultValue="true"
                 description="Emulate method breakpoints with line breakpoints by default"/>
    <registryKey key="debugger.intern.string.literals" defaultValue="false"
                 description="Make string literal refer to the same instance of class String"/>
    <registryKey key="debugger.capture.points.agent.debug" defaultValue="false"
                 description="Enable debug logging for capture points agent"/>
    <registryKey key="debugger.collection.breakpoint.agent.debug" defaultValue="false"
                 description="Enable debug logging for collection breakpoints agent"/>
    <registryKey key="debugger.capture.points.agent.annotations" defaultValue="true"
                 description="Enable reading capture points from annotations"/>
    <registryKey key="debugger.collection.watchpoints.enabled" defaultValue="false"
                 description="Enable collection watchpoints support"/>
    <registryKey key="debugger.async.stacks.coroutines" defaultValue="true"
                 description="Enable async stack traces for coroutines"/>
    <registryKey key="debugger.async.stacks.max.depth" defaultValue="500"
                 description="Maximum depth of captured async stacks"/>
    <registryKey key="debugger.log.async.stacks" defaultValue="false"
                 description="Log async stack trace when log stack trace is checked in breakpoint properties"/>
    <registryKey key="debugger.batch.evaluation" defaultValue="true"
                 description="Evaluate multiple values in a single batch request to the debuggee"/>
    <registryKey key="debugger.batch.evaluation.force" defaultValue="false"
                 description="Force batch evaluation even when individual evaluation is possible"/>
    <registryKey key="debugger.compiling.evaluator.method.refs" defaultValue="false"
                 description="Use the compiling evaluator for the code with method references"/>
    <registryKey key="debugger.async.smart.step.into" defaultValue="true"
                 description="Smart step into anonymous class methods in any thread"/>
    <registryKey key="debugger.monitor.blocked.threads" defaultValue="true"
                 description="Watch if a thread we do stepping in is blocked by another suspended thread"/>
    <registryKey key="debugger.check.source" defaultValue="true"
                 description="Check that the source code matches the bytecode"/>
  </extensions>

  <actions>
    <group id="JavaDebuggerActions">
      <action id="Debugger.ShowCollectionHistory" class="com.intellij.debugger.actions.ShowCollectionHistoryAction">
        <add-to-group group-id="XDebugger.ValueGroup" anchor="last"/>
      </action>
      <action id="Debugger.NewCustomField" class="com.intellij.debugger.actions.NewCustomFieldAction">
        <add-to-group group-id="XDebugger.Variables.Tree.Popup" anchor="first"/>
        <add-to-group group-id="XDebugger.Watches.Tree.Popup" anchor="after" relative-to-action="XDebugger.NewWatch"/>
      </action>
      <action id="Debugger.EditCustomField" class="com.intellij.debugger.actions.EditCustomFieldAction"
              use-shortcut-of="XDebugger.SetValue">
        <add-to-group group-id="XDebugger.Variables.Tree.Popup" anchor="first"/>
        <add-to-group group-id="XDebugger.Watches.Tree.Popup" anchor="after" relative-to-action="XDebugger.EditWatch"/>

      </action>
      <action id="Debugger.RemoveCustomField" class="com.intellij.debugger.actions.RemoveCustomFieldAction"
              use-shortcut-of="XDebugger.RemoveWatch">
        <add-to-group group-id="XDebugger.Variables.Tree.Popup" anchor="first"/>
        <add-to-group group-id="XDebugger.Watches.Tree.Popup" anchor="after" relative-to-action="XDebugger.RemoveWatch"/>
      </action>
      <action id="Debugger.EditArrayFilter" class="com.intellij.debugger.actions.ArrayFilterAction$Edit"
              use-shortcut-of="XDebugger.SetValue">
        <add-to-group group-id="XDebugger.Variables.Tree.Popup" anchor="first"/>
        <add-to-group group-id="XDebugger.Watches.Tree.Popup" anchor="after" relative-to-action="XDebugger.EditWatch"/>
      </action>
      <action id="Debugger.RemoveArrayFilter" class="com.intellij.debugger.actions.ArrayFilterAction$Delete"
              use-shortcut-of="XDebugger.RemoveWatch">
        <add-to-group group-id="XDebugger.Variables.Tree.Popup" anchor="first"/>
        <add-to-group group-id="XDebugger.Watches.Tree.Popup" anchor="after" relative-to-action="XDebugger.RemoveWatch"/>
      </action>

      <action id="Debugger.CustomizeThreadsView" class="com.intellij.debugger.actions.CustomizeThreadsViewAction">
        <add-to-group group-id="XDebugger.Frames.Tree.Popup" anchor="last"/>
      </action>
      <action id="Debugger.EditFrameSource" class="com.intellij.debugger.actions.EditFrameSourceAction" use-shortcut-of="EditSource"/>
      <action id="Debugger.FilterArray" class="com.intellij.debugger.actions.ArrayAction$FilterArrayAction">
        <add-to-group group-id="XDebugger.ValueGroup" anchor="last"/>
      </action>
      <action id="Debugger.AdjustArrayRange" class="com.intellij.debugger.actions.ArrayAction$AdjustArrayRangeAction">
        <add-to-group group-id="XDebugger.ValueGroup" anchor="last"/>
      </action>
      <action id="Debugger.ShowRelatedStack" class="com.intellij.debugger.actions.ShowRelatedStackAction">
        <add-to-group group-id="XDebugger.ValueGroup" anchor="first"/>
      </action>
      <action id="Debugger.ResumeThread" class="com.intellij.debugger.actions.ResumeThreadAction"/>
      <action id="Debugger.FreezeThread" class="com.intellij.debugger.actions.FreezeThreadAction"/>
      <action id="Debugger.InterruptThread" class="com.intellij.debugger.actions.InterruptThreadAction"/>

      <action id="Debugger.ForceEarlyReturn" class="com.intellij.debugger.actions.ForceEarlyReturnAction">
        <add-to-group group-id="XDebugger.Frames.Tree.Popup" anchor="after" relative-to-action="Debugger.PopFrame"/>
        <add-to-group group-id="DebuggingActionsGroup" anchor="after" relative-to-action="Debugger.PopFrame"/>
        <add-to-group group-id="XDebugger.ToolWindow.TopToolbar3.Extra"/>
      </action>

      <action id="Debugger.ThrowException" class="com.intellij.debugger.actions.ThrowExceptionAction">
        <add-to-group group-id="XDebugger.Frames.Tree.Popup" anchor="after" relative-to-action="Debugger.PopFrame"/>
        <add-to-group group-id="DebuggingActionsGroup" anchor="after" relative-to-action="Debugger.ForceEarlyReturn"/>
        <add-to-group group-id="XDebugger.ToolWindow.TopToolbar3.Extra"/>
      </action>

      <action id="Debugger.AddSteppingFilter" class="com.intellij.debugger.actions.AddSteppingFilterAction">
        <add-to-group group-id="XDebugger.Frames.Tree.Popup"/>
      </action>

      <action id="Debugger.SwitchToTheNextContext" class="com.intellij.debugger.actions.SwitchToTheNextContextAction"/>
      <action id="Debugger.CallTracer" class="com.intellij.debugger.ui.breakpoints.CallTracer$CallTracerToggleAction"
              icon="AllIcons.Debugger.Db_set_breakpoint">
        <add-to-group group-id="XDebugger.ToolWindow.TopToolbar"/>
      </action>
      <action id="Debugger.ReloadFile" class="com.intellij.debugger.actions.ReloadFileAction"/>
    </group>

    <action class="com.intellij.debugger.memory.action.tracking.JumpToAllocationSourceAction"
            id="MemoryView.ShowAllocationStackTrace">
      <add-to-group group-id="XDebugger.ValueGroup" anchor="after"
                    relative-to-action="XDebugger.JumpToTypeSource"/>
    </action>

    <action class="com.intellij.debugger.memory.action.ShowClassesWithInstanceAction"
            id="MemoryView.ShowOnlyWithInstances">
      <add-to-group group-id="MemoryView.SettingsPopupActionGroup" anchor="before" relative-to-action="MemoryView.ShowOnlyWithDiff"/>
    </action>

    <action class="com.intellij.debugger.memory.action.ShowTrackedAction"
            id="MemoryView.ShowOnlyTracked">
      <add-to-group group-id="MemoryView.SettingsPopupActionGroup" anchor="after" relative-to-action="MemoryView.ShowOnlyWithDiff"/>
    </action>

    <action class="com.intellij.debugger.memory.action.EnableBackgroundTrackingAction"
            id="MemoryView.EnableTrackingWithClosedWindow">
      <add-to-group group-id="MemoryView.SettingsPopupActionGroup" anchor="before" relative-to-action="MemoryView.SwitchUpdateMode"/>
    </action>

    <group id="MemoryView.ClassesPopupActionGroup">
      <action class="com.intellij.debugger.memory.action.ShowInstancesFromClassesViewAction"
              id="MemoryView.ShowInstances"/>

      <action class="com.intellij.debugger.memory.action.ShowNewInstancesAction"
              id="MemoryView.ShowNewInstances"/>

      <action class="com.intellij.debugger.memory.action.JumpToTypeSourceAction"
              id="MemoryView.JumpToTypeSource"/>
      <separator/>

      <action class="com.intellij.debugger.memory.action.tracking.TrackInstancesToggleAction"
              id="MemoryView.TrackingAction.NewInstancesTracking"/>
    </group>

    <action id="Hotswap" class="com.intellij.debugger.actions.HotSwapAction"/>

    <group id="ToggleBreakpointAction">
      <action id="ToggleMethodBreakpoint" class="com.intellij.debugger.actions.ToggleMethodBreakpointAction">
        <override-text place="MainMenu"/>
        <!--<add-to-group group-id="JavaCompileGroup" anchor="first"/>-->
      </action>
      <action id="ToggleFieldBreakpoint" class="com.intellij.debugger.actions.ToggleFieldBreakpointAction">
        <override-text place="MainMenu"/>
        <add-to-group group-id="XDebugger.ValueGroup" anchor="after" relative-to-action="Debugger.AddToWatch"/>
        <!--<add-to-group group-id="JavaCompileGroup" anchor="after" relative-to-action="ToggleMethodBreakpoint"/>-->
      </action>
      <add-to-group group-id="BreakpointActionsGroup" anchor="after" relative-to-action="ToggleLineBreakpoint"/>
    </group>

    <group id="EditorPopupMenuDebugJava">
      <separator/>
      <reference ref="ToggleFieldBreakpoint"/>
      <separator/>
      <add-to-group group-id="EditorPopupMenuDebug" anchor="last"/>
    </group>

    <action id="ExportThreads" class="com.intellij.debugger.actions.ExportThreadsAction" icon="AllIcons.ToolbarDecorator.Export">
      <add-to-group group-id="XDebugger.Frames.Tree.Popup"/>
      <add-to-group group-id="XDebugger.Threads.View.Popup"/>
      <add-to-group group-id="XDebugger.Actions"/>
    </action>

    <action id="DebugListen" internal="true" class="com.intellij.debugger.actions.ThrowDebugExceptionAction">
      <add-to-group group-id="Internal.Errors"/>
    </action>

    <action id="StepOverInstruction" internal="true" class="com.intellij.debugger.actions.StepOverInstructionAction"
            icon="AllIcons.Actions.Play_forward">
      <add-to-group group-id="DebuggingActionsGroup"/>
    </action>

    <action id="RepairDebuggerViewAction" internal="true" class="com.intellij.debugger.actions.RepairDebuggerViewAction"
            icon="AllIcons.General.Gear">
      <add-to-group group-id="DebuggingActionsGroup"/>
    </action>

    <group id="Debugger.ThreadsPanelPopup">
      <reference ref="Debugger.ResumeThread"/>
      <reference ref="Debugger.FreezeThread"/>
      <reference ref="Debugger.InterruptThread"/>
      <reference ref="Debugger.PopFrame"/>
      <separator/>
      <reference ref="ExportThreads"/>
      <reference ref="Debugger.AddSteppingFilter"/>
      <separator/>
      <reference ref="Debugger.CustomizeThreadsView"/>
    </group>

    <action id="com.intellij.debugger.feedback.KotlinDebuggerFeedbackTestAction"
            class="com.intellij.debugger.feedback.KotlinDebuggerFeedbackTestAction" internal="true"/>

    <reference ref="Debugger.ShowLibraryFrames">
      <add-to-group group-id="XDebugger.Frames.Tree.Popup" anchor="before" relative-to-action="Debugger.AsyncStacks"/>
    </reference>
  </actions>
</idea-plugin>
